$el: '._left-menu';
$text-color: #6e2257;
$bg-color: #ede6f2;
$item-padding: 1.4em 1em;
$item-border: 1px solid #9a899e;

$header-active-color: #553d59;
$subheader-active-color: #c4add4;

$arrow-width: 21px;

#{$el}{
  overflow: hidden;
  &, & li, ul, ul li{ list-style: none; padding: 0; margin: 0; }

  li{ border-top: $item-border; }
  li:first-child{ border-top: none; }

  // убираем стрелки у ссылок
  li.empty a{ &:after{ background-image: none; } }

  a{
    padding: $item-padding;
    font-family: 'PragmaticaC';
    font-size: 16px;
    background-color: $bg-color;
    display: block;
    line-height: 1;
    position: relative;
    @include link-states-style{
      color: $text-color;
      text-decoration: none;
    }

    // стрелки у пунктов меню
    &:after{
      content: ' ';
      display: block;
      width: $arrow-width;
      height: 100%;
      position: absolute;
      top: 0;
      right: 15px;
      background-image: image-url('arrows.png');
      background-repeat: no-repeat;
      background-position: 0 50%;
    }

    // активные пункты меню
    &:hover, &:active, &.opened, &.current-active{ background-color: $color-bg; }

    // стрелка у активного пункта меню
    &.opened:after{ background-position: -$arrow-width 50%; }

    // убираем стрелки у пунктов меню
    &.empty{ &:after{ background-image: none; } }
  }
}

// рутовый уровень вложенности
#{$el}-root-level{
  position: relative;
  overflow: hidden;
  > li > a{
    &.opened{ background-color: $header-active-color; color: white; }
    &.opened{ z-index: 666; }
    &.opened:after{ background-position: -$arrow-width*2 50%; }
  }
}


// первый уровень вложенности
#{$el}-first-level{
  display: none;
  position: relative;
  overflow: hidden;
  border-left: 10px solid $header-active-color;
  > li > a{
    display: block;
    padding-left: 2em;
  }

}

// последний уровень меню
#{$el}-second-level{
  display: none;
  position: relative;
  border-left: 10px solid $subheader-active-color;
  > li > a{
    display: block;
    padding-left: 3em;
    &.opened{ box-shadow: none; }
  }


}

// скрываем пустые подменю в самом последнем уровне вложенности меню
#{$el}-second-level,
#{$el}-first-level{
  &:empty{
    display: none !important;
  }
}

// верхняя и нижняя тень у открытого блока с меню
.opened{
  #{$el}-second-level,
  #{$el}-first-level{
    &:before, &:after{
      content: ' ';
      display: block;
      position: absolute;
      width: 140%;
      height: 0;
      box-shadow: -20px 0 2px 2px rgba(0,0,0,0.3);
      z-index: 666;
    }
    &:after{
      bottom: 1px;
    }
    &:before{
      top: 0;
    }
  }
}
